import{u as q,b as X,d as r,e as I,f as i,o as m,h as n,i as b,v as f,F as h,j as k,t as V,l as U,m as S,k as G}from"./index-nO542_Ze.js";const Q={key:0},W=["value"],Y=["onUpdate:modelValue","onInput"],Z={class:"mb-4 mt-4 p-2 border rounded"},ee={key:0,class:"text-xs text-gray-500 mb-2"},te={class:"flex items-center justify-between mb-2"},oe={class:"font-semibold text-sm"},ne=["onClick"],se={class:"space-y-2"},le={class:"w-1/4 text-[11px] text-gray-600 font-bold"},ie={class:"grid grid-cols-1 gap-1 flex-1"},ae=["onUpdate:modelValue","onChange"],ue=["onUpdate:modelValue"],de={key:1,class:"flex gap-1"},pe=["onUpdate:modelValue"],re=["onUpdate:modelValue"],me={key:2,class:"flex flex-col gap-1"},be={class:"grid grid-cols-1 gap-1"},ve=["onUpdate:modelValue"],fe=["onUpdate:modelValue","onInput"],ye=["onUpdate:modelValue"],ce={class:"text-[10px] text-gray-500"},xe={key:3,class:"text-[11px] italic text-gray-400"},ge={class:"mb-4 mt-4 p-2 border rounded"},we={class:"flex items-center gap-2 mb-2"},he=["checked"],ke={key:0,class:"space-y-2"},Ce=["onUpdate:modelValue"],Ie=["onUpdate:modelValue"],Ve=["onUpdate:modelValue"],Ue=["onClick"],_e={class:"mt-2"},Ne={__name:"TableInputEditor",props:{element:Object},setup(T){var $;const g=T,o=g.element,y=q();function p(t,e){y.selectedColumnFieldInfo?y.updateSelectedColumnFieldProperty(t,e):y.updateSelectedProperty(t,e)}function A(t){const e=t.target.value;if(!y.isNameUnique(e,g.element.id)){alert("Name harus unik"),t.target.value=g.element.name||"";return}p("name",e)}const C=X((($=g.element.columns)==null?void 0:$.length)||1);function _(){return{type:"text",text:""}}function F(t){const e=t.length;!o.rows||!Array.isArray(o.rows)||(o.rows=o.rows.map(l=>{const v=(Array.isArray(l)?l:[]).slice(0,e);for(;v.length<e;)v.push(_());return v}),p("rows",o.rows))}function R(){const t=Math.max(1,C.value),l=[...(o.columns||[]).slice(0,t)];for(;l.length<t;)l.push(`Kolom ${l.length+1}`);o.columns=l,p("columns",o.columns),F(l)}function B(t,e){o.columns[t]=e,p("columns",o.columns)}function K(){var l;const t=((l=o.columns)==null?void 0:l.length)||1,e=Array.from({length:t},()=>_());o.rows||(o.rows=[]),o.rows.push(e),p("rows",o.rows)}function L(t){if(t.name||(t.name=""),!Array.isArray(t.options)||!t.options.length){const e=t.label||t.text||"",l=(e||"").toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")||"";t.options=[{name:t.name||l,label:e,value:l}]}else{const e=t.options[0];t.label&&!e.label&&(e.label=t.label),t.value&&!e.value&&(e.value=t.value),e.name||(e.name=t.name||e.value||"")}delete t.label,delete t.value,delete t.text}function j(t){t.label||(t.label=t.text||""),"value"in t||(t.value=""),t.name||(t.name=""),delete t.text,delete t.options}function E(t){t.text||(t.text=t.label||t.value||""),delete t.label,delete t.value,delete t.options,delete t.name}function O(t){o.rows&&(o.rows.splice(t,1),p("rows",o.rows))}function x(){p("rows",o.rows)}function D(t,e){var c,v;const l=(v=(c=o.rows)==null?void 0:c[t])==null?void 0:v[e];l&&(l.type==="checkbox"||l.type==="radio"?L(l):l.type==="input"?j(l):l.type==="text"?E(l):l.type==="empty"&&Object.keys(l).forEach(a=>{a!=="type"&&delete l[a]}),p("rows",o.rows))}function z(t){if(!t.options||!t.options[0])return;const e=t.options[0];e.value||(e.value=(e.label||"").toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")),x()}function H(t){t.target.checked?p("visibility",{showIf:{all:[{field:"",op:"==",value:""}]},else:"hide"}):p("visibility",void 0)}function M(){o.visibility.showIf.all.push({field:"",op:"==",value:""}),p("visibility",o.visibility)}function J(t){o.visibility.showIf.all.splice(t,1),p("visibility",o.visibility)}function P(){var t;if(y.selectedColumnFieldInfo){const{colIndex:e,fieldId:l,parentId:c}=y.selectedColumnFieldInfo,v=y.elements.find(a=>a.id===c);v&&((t=v.columns)!=null&&t[e])&&(v.columns[e]=v.columns[e].filter(a=>a.id!==l),y.selectedColumnFieldInfo=null)}else y.deleteSelectedElement()}return(t,e)=>{var l,c,v;return((l=i(o))==null?void 0:l.type)==="table"?(m(),r("div",Q,[n("div",{class:"flex items-center justify-between mt-3"},[e[15]||(e[15]=n("h2",{class:"font-semibold mb-2"},"Table Input",-1)),n("button",{type:"button",onClick:P,class:"px-3 py-2 text-xs font-medium text-center text-white bg-red-700 rounded-lg hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800"}," Delete ")]),e[23]||(e[23]=n("label",{class:"block mb-1"},"Label",-1)),b(n("input",{"onUpdate:modelValue":e[0]||(e[0]=a=>i(o).label=a),onInput:e[1]||(e[1]=a=>p("label",i(o).label)),class:"w-full border p-1 mb-2"},null,544),[[f,i(o).label]]),e[24]||(e[24]=n("label",{class:"block mb-1"},"Name",-1)),n("input",{value:i(o).name,onInput:A,class:"w-full border p-1 mb-2"},null,40,W),e[25]||(e[25]=n("label",{class:"block mb-1"},"Classes",-1)),b(n("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>i(o).class=a),onInput:e[3]||(e[3]=a=>p("class",i(o).class)),class:"w-full border p-1 mb-4"},null,544),[[f,i(o).class]]),e[26]||(e[26]=n("label",{class:"block mb-1"},"Jumlah Kolom",-1)),b(n("input",{type:"number",class:"w-full border p-1 mb-2","onUpdate:modelValue":e[4]||(e[4]=a=>C.value=a),onInput:R,min:"1"},null,544),[[f,C.value,void 0,{number:!0}]]),e[27]||(e[27]=n("label",{class:"block mb-1"},"Nama Kolom",-1)),(m(!0),r(h,null,k(i(o).columns,(a,d)=>(m(),r("div",{key:d,class:"flex gap-2 mb-2"},[b(n("input",{"onUpdate:modelValue":s=>i(o).columns[d]=s,onInput:s=>B(d,i(o).columns[d]),class:"w-full border p-1"},null,40,Y),[[f,i(o).columns[d]]])]))),128)),n("fieldset",Z,[e[17]||(e[17]=n("legend",{class:"text-sm font-medium mb-2"},"Rows (Isi Tabel)",-1)),!i(o).rows||!i(o).rows.length?(m(),r("div",ee," Belum ada baris. Klik tombol di bawah untuk menambah baris. ")):I("",!0),(m(!0),r(h,null,k(i(o).rows,(a,d)=>(m(),r("div",{key:d,class:"border rounded p-2 mb-2 bg-white"},[n("div",te,[n("span",oe,"Row "+V(d+1),1),n("button",{type:"button",class:"text-xs text-red-600 hover:underline",onClick:s=>O(d)}," Hapus baris ",8,ne)]),n("div",se,[(m(!0),r(h,null,k(a,(s,w)=>{var N;return m(),r("div",{key:w,class:"flex items-top gap-2"},[n("span",le,V(((N=i(o).columns)==null?void 0:N[w])||"Kolom "+(w+1)),1),n("div",ie,[b(n("select",{"onUpdate:modelValue":u=>s.type=u,onChange:u=>D(d,w),class:"border p-1 text-xs"},e[16]||(e[16]=[S('<option value="text">Text</option><option value="input">Input</option><option value="checkbox">Checkbox</option><option value="radio">Radio</option><option value="empty">Kosong</option>',5)]),40,ae),[[U,s.type]]),s.type==="text"?b((m(),r("input",{key:0,class:"border p-1 text-xs","onUpdate:modelValue":u=>s.text=u,placeholder:"Isi teks cell",onInput:e[5]||(e[5]=u=>x())},null,40,ue)),[[f,s.text]]):s.type==="input"?(m(),r("div",de,[b(n("input",{class:"border p-1 text-xs flex-1","onUpdate:modelValue":u=>s.label=u,placeholder:"Label",onInput:e[6]||(e[6]=u=>x())},null,40,pe),[[f,s.label]]),b(n("input",{class:"border p-1 text-xs w-28","onUpdate:modelValue":u=>s.name=u,placeholder:"Name",onInput:e[7]||(e[7]=u=>x())},null,40,re),[[f,s.name]])])):s.type==="checkbox"||s.type==="radio"?(m(),r("div",me,[n("div",be,[b(n("input",{class:"border p-1 text-xs w-28","onUpdate:modelValue":u=>s.name=u,placeholder:"group name",onInput:e[8]||(e[8]=u=>x())},null,40,ve),[[f,s.name]]),b(n("input",{class:"border p-1 text-xs flex-1","onUpdate:modelValue":u=>s.options[0].label=u,placeholder:"option label",onInput:u=>z(s)},null,40,fe),[[f,s.options[0].label]]),b(n("input",{class:"border p-1 text-xs w-28","onUpdate:modelValue":u=>s.options[0].value=u,placeholder:"option value",onInput:e[9]||(e[9]=u=>x())},null,40,ye),[[f,s.options[0].value]])]),n("small",ce,' JSON: { type: "'+V(s.type)+'", name, options: [ { label, value } ] } ',1)])):(m(),r("span",xe," (kosong) "))])])}),128))])]))),128)),n("button",{type:"button",onClick:K,class:"mt-1 inline-flex items-center px-3 py-1 text-xs font-medium rounded bg-blue-600 text-white hover:bg-blue-700"}," + Tambah Baris ")]),n("fieldset",ge,[e[22]||(e[22]=n("legend",{class:"text-sm font-medium mb-2"}," Conditional Visibility ",-1)),n("label",we,[e[18]||(e[18]=G(" Has visibility? ")),n("input",{type:"checkbox",checked:!!i(o).visibility,onChange:H},null,40,he)]),(v=(c=i(o).visibility)==null?void 0:c.showIf)!=null&&v.all?(m(),r("div",ke,[(m(!0),r(h,null,k(i(o).visibility.showIf.all,(a,d)=>(m(),r("div",{key:d,class:"flex gap-2 items-center"},[b(n("input",{"onUpdate:modelValue":s=>i(o).visibility.showIf.all[d].field=s,onInput:e[10]||(e[10]=s=>p("visibility",i(o).visibility)),placeholder:"field name",class:"border p-1 w-1/3"},null,40,Ce),[[f,i(o).visibility.showIf.all[d].field]]),b(n("select",{"onUpdate:modelValue":s=>i(o).visibility.showIf.all[d].op=s,onChange:e[11]||(e[11]=s=>p("visibility",i(o).visibility)),class:"border p-1"},e[19]||(e[19]=[S('<option value="==">==</option><option value="!=">!=</option><option value="&gt;">&gt;</option><option value="&lt;">&lt;</option><option value="&gt;=">&gt;=</option><option value="&lt;=">&lt;=</option>',6)]),40,Ie),[[U,i(o).visibility.showIf.all[d].op]]),b(n("input",{"onUpdate:modelValue":s=>i(o).visibility.showIf.all[d].value=s,onInput:e[12]||(e[12]=s=>p("visibility",i(o).visibility)),placeholder:"value",class:"border p-1 w-1/3"},null,40,Ve),[[f,i(o).visibility.showIf.all[d].value]]),n("button",{type:"button",onClick:s=>J(d),class:"text-red-500 text-sm"}," X ",8,Ue)]))),128)),n("button",{type:"button",onClick:M,class:"text-blue-500 text-xs"}," + Add Condition "),n("div",_e,[e[21]||(e[21]=n("label",{class:"block text-sm"},"Else action",-1)),b(n("select",{"onUpdate:modelValue":e[13]||(e[13]=a=>i(o).visibility.else=a),onChange:e[14]||(e[14]=a=>p("visibility",i(o).visibility)),class:"border p-1"},e[20]||(e[20]=[n("option",{value:"show"},"Show",-1),n("option",{value:"hide"},"Hide",-1)]),544),[[U,i(o).visibility.else]])])])):I("",!0)])])):I("",!0)}}};export{Ne as default};
